{
  "version": 3,
  "sources": ["../../../src/usecases/res-op/descrBuilder.ts"],
  "sourcesContent": ["import { INodeProperties, INodePropertyOptions } from 'n8n-workflow';\n\ninterface IRes {\n\tdisplay?: string;\n\tdefaultOperation?: string;\n\toperations: Record<string, IOp>;\n}\n\ninterface IOp {\n\tnotImplemented?: boolean;\n\tdisplay?: string;\n\tdesc?: string;\n\tparams: INodeProperties[];\n}\n\nexport const getResourcesParam = (resources: Record<string, IRes>): INodeProperties => {\n\tconst options: INodePropertyOptions[] = Object.entries(resources)\n\t\t.map(([name, res]) => ({\n\t\t\tname: res.display || name,\n\t\t\tvalue: name,\n\t\t}));\n\n\treturn {\n\t\tdisplayName: 'Resource',\n\t\tname: 'resource',\n\t\ttype: 'options',\n\t\tnoDataExpression: true,\n\t\toptions,\n\t\tdefault: options[0].value,\n\t};\n};\n\nexport const getOperationsParam = (\n\toperations: Record<string, IOp>,\n\tdefaultOp: string,\n\tresourceName: string,\n): INodeProperties => {\n\tconst options: INodePropertyOptions[] = Object.entries(operations)\n\t\t.filter(([_, op]) => !op.notImplemented)\n\t\t.map(([name, op]) => {\n\t\t\treturn {\n\t\t\t\tname: op.display || name,\n\t\t\t\tvalue: name,\n\t\t\t\tdescription: op.desc,\n\t\t\t};\n\t\t});\n\n\treturn {\n\t\tdisplayName: 'Operation',\n\t\tname: 'operation',\n\t\ttype: 'options',\n\t\tnoDataExpression: true,\n\t\tdefault: defaultOp,\n\t\tdisplayOptions: {\n\t\t\tshow: {\n\t\t\t\tresource: [resourceName],\n\t\t\t},\n\t\t},\n\t\toptions,\n\t};\n};\n\nexport const getDescriptionsDict = (resources: Record<string, IRes>): Record<string, INodeProperties | INodeProperties[]> => {\n\tconst result: Record<string, INodeProperties | INodeProperties[]> = {};\n\tconst resource = getResourcesParam(resources);\n\tresult.resources = resource;\n\n\tObject.entries(resources).map(([resName, r]) => {\n\t\tconst operations = getOperationsParam(r.operations, r.defaultOperation!, resName);\n\t\tconst fields = Object.entries(r.operations)\n\t\t\t.filter(([_, op]) => !op.notImplemented)\n\t\t\t.map(([_, op]) => op.params)\n\t\t\t.flat();\n\n\t\tresult[resName + 'Fields'] = [\n\t\t\toperations,\n\t\t\t...fields,\n\t\t];\n\t});\n\n\treturn result;\n};\n"],
  "mappings": "AAeO,GAAM,GAAoB,AAAC,GAAqD,CACtF,GAAM,GAAkC,OAAO,QAAQ,CAAS,EAC9D,IAAI,CAAC,CAAC,EAAM,KAAU,EACtB,KAAM,EAAI,SAAW,EACrB,MAAO,CACR,EAAE,EAEH,MAAO,CACN,YAAa,WACb,KAAM,WACN,KAAM,UACN,iBAAkB,GAClB,UACA,QAAS,EAAQ,GAAG,KACrB,CACD,EAEa,EAAqB,CACjC,EACA,EACA,IACqB,CACrB,GAAM,GAAkC,OAAO,QAAQ,CAAU,EAC/D,OAAO,CAAC,CAAC,EAAG,KAAQ,CAAC,EAAG,cAAc,EACtC,IAAI,CAAC,CAAC,EAAM,KACL,EACN,KAAM,EAAG,SAAW,EACpB,MAAO,EACP,YAAa,EAAG,IACjB,EACA,EAEF,MAAO,CACN,YAAa,YACb,KAAM,YACN,KAAM,UACN,iBAAkB,GAClB,QAAS,EACT,eAAgB,CACf,KAAM,CACL,SAAU,CAAC,CAAY,CACxB,CACD,EACA,SACD,CACD,EAEa,EAAsB,AAAC,GAAyF,CAC5H,GAAM,GAA8D,CAAC,EAC/D,EAAW,EAAkB,CAAS,EAC5C,SAAO,UAAY,EAEnB,OAAO,QAAQ,CAAS,EAAE,IAAI,CAAC,CAAC,EAAS,KAAO,CAC/C,GAAM,GAAa,EAAmB,EAAE,WAAY,EAAE,iBAAmB,CAAO,EAC1E,EAAS,OAAO,QAAQ,EAAE,UAAU,EACxC,OAAO,CAAC,CAAC,EAAG,KAAQ,CAAC,EAAG,cAAc,EACtC,IAAI,CAAC,CAAC,EAAG,KAAQ,EAAG,MAAM,EAC1B,KAAK,EAEP,EAAO,EAAU,UAAY,CAC5B,EACA,GAAG,CACJ,CACD,CAAC,EAEM,CACR",
  "names": []
}
