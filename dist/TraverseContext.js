import{a as p}from"./chunk-4O5QHPHW.js";var y=new Map([["str",a=>typeof a=="string"],["num",a=>typeof a=="number"],["arr",a=>Array.isArray(a)],["obj",a=>!Array.isArray(a)&&a instanceof Object]]),c=class{constructor(t){this.path=[];this.data={};this.sourceObj=t}log(t,...r){if(t){let s=r.map(e=>typeof e=="object"?JSON.stringify(e):e.toString()).join("");console.log(s)}}getPathBySliceEnd(t){return this.path.slice(0,t)}getPath(t){return t===void 0||t===0?this.path:t instanceof Array?t:this.getPathBySliceEnd(t)}isMatchCustomType(t,r,s=!1){let e=this.getData(r*-1);return this.log(s,`isMatchCustomType: data?.type=${e==null?void 0:e.type}, type=${t}`),(e==null?void 0:e.type)===t}isMatchJsType(t,r,s=!1){let e=y.get(t);if(e){let n=this.getValue(r*-1),i=e(n);return this.log(s,`isMatchJsType: ${t}, pathIndexRev=${r} path=`,this.getPath(r*-1).join("."),". v=",typeof n=="string"?n:"{...}",`. ${i}`),i}throw new Error(`Unexpected js type: ${t}`)}isMatchPart(t,r,s=!1){let[e,n]=t.split(/\s*::\s*/),i=n?n.split(/\s*,\s*/):[],h=r===0?this.path[this.path.length-1]:this.path[this.path.length-1-r];return this.log(s,`isMatchPart: pathPart=${h}, propName=${e}, types`,i),e!==""&&e!=="*"&&h!==e?(this.log(s,"NOT MATCH"),!1):i.every((o,u)=>y.has(o)?this.isMatchJsType(o,r,s):this.isMatchCustomType(o,r,s),this)}isMatch(t,r=!1){let s=t.split(/\s*\/\s*/);return this.log(r,"parts: ",s),s.reverse().every((e,n)=>this.isMatchPart(e,n,r),this)}getValue(t){let r=this.getPath(t);return p(r,this.sourceObj)}getData(t){let r=this.getPath(t);return this.data[r.join(".")]}setData(t,r){this.data[t.join(".")]=r}};export{c as TraverseContext};
//# sourceMappingURL=TraverseContext.js.map
