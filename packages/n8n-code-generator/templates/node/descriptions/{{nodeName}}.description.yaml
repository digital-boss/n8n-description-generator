resources:

  group:
    display: Group
    defaultOperation: getAll

    operations:

      create:
        notImplemented: true
        display: Create
        method: POST
        path: /groups
        params:
          - $link: cmn.additionalFields
            options:
              - Group.name
              - Group.limit
              - Group.customField
              - Group.email

      createMulti:
        notImplemented: true
        display: Create Multiple
        method: POST
        path: /groups
        desc: Create Multiple Groups
        params:
          - name: groups
            displayName: Groups
            type: fixedCollection
            typeOptions:
              multipleValues: true
            options:
              - name: groupProperties
                values:
                  - Group.name
                  - Group.limit
                  - Group.customField
                  - Group.email

      get:
        display: View Group
        method: GET
        path: /groups/{id}
        params:
          - Group.id

      getUsers:
        display: List Group's Users
        method: GET
        path: /groups/{id}/users
        desc: View Group's Users List
        params:
          - Group.id
          - $link: cmn.additionalFields
            options:
              - cmn.page
              - cmn.limit
      getAll:
        # Same operation for search: {{host}}/api/v2/groups/search/finance?filter=capped
        display: List Groups
        method: GET
        path: /groups
        desc: List/Search groups
        params:
          - $link: cmn.additionalFields
            options:
              - name: search
                displayName: Search String
                description: The search will be conducted on the group's name, group's custom code and group's notification email address
              - name: filter
                type: options
                options:
                  - capped
                  - unassigned
              - cmn.page
              - cmn.limit

      update:
        notImplemented: true
        display: Update Group
        method: PUT
        path: /groups
        params:
          - Group.id
          - $link: cmn.additionalFields
            options:
              - Group.name
              - Group.limit
              - Group.customField
              - Group.email

      updateMulti:
        notImplemented: true
        display: Update Multiple Groups
        method: PUT
        path: /groups
        params:
          - name: groups
            type: fixedCollection
            typeOptions:
              multipleValues: true
            options:
              - name: groupChoice
                values:
                  - Group.id
                  - name: groupFields
                    displayName: Group Fields
                    type: collection
                    options:
                      - Group.name
                      - Group.limit
                      - Group.customField
                      - Group.email

      suspend:
        notImplemented: true
        display: Suspend Group
        method: PUT
        path: /groups/suspend
        params:
          - Group.id

      unsuspend:
        notImplemented: true
        display: Unsuspend Group
        method: PUT
        path: /groups/unsuspend
        params:
          - Group.id

      delete:
        notImplemented: true
        display: Delete Group
        method: DELETE
        path: /groups
        params:
          - name: items
            displayName: "Item's IDs"
            type: fixedCollection
            typeOptions:
              multipleValues: true
            options:
              - name: itemChoice
                values:
                  - Group.id

  sim:
    display: SIM
    defaultOperation: getAll

    operations:

      getAll:
        display: List SIMs
        method: GET
        path: /sims
        params:
          - $link: cmn.additionalFields
            options:
              - name: query
                type: options
                options:
                  - unassigned
                  - capped
              - cmn.page
              - cmn.limit

      get:
        display: View SIM
        method: GET
        path: /sims/{cellnumber}
        desc: View SIM (including Location services)
        params:
          - name: cellnumber
            displayName: Cell Number
            type: number
            description: Cell number must be a valid cellnumber on the APN

      search:
        display: Search SIMs
        method: GET
        path: /sims/search/{search}
        desc: |
          The search term must not contain special characters.
          The search will be conducted on the following
          - cellnumber (MSISDN)
          - SIM serial (ICCID)
          - SIM name
          - SIM IP Address
          Pagination does not apply to this endpoint.
        params:
          - name: search

      # ToDo: Do we need to implement multi item operation for: update, assign, unassign, suspend, unsuspend
      update:
        notImplemented: true
        display: Update SIM
        method: PUT
        path: /sims
        params:
          - Sim.cellNumber
          - $link: cmn.additionalFields
            options:
              - Sim.realm
              - Sim.name
              - Sim.serial

      assign:
        notImplemented: true
        display: Assign SIM to User
        method: PUT
        path: /sims/assign
        params:
          - Sim.cellNumber
          - Sim.userID
          - Sim.realm

      unassign:
        notImplemented: true
        display: Unassign SIM from APN User
        method: PUT
        path: /sims/unassign
        params:
          - Sim.cellNumber
          - Sim.userID
          - Sim.realm

      suspend:
        notImplemented: true
        display: Suspend SIM
        method: PUT
        path: /sims/suspend
        params:
          - Sim.cellNumber
          - Sim.realm

      unsuspend:
        notImplemented: true
        display: Unsuspend SIM
        method: PUT
        path: /sims/unsuspend
        params:
          - Sim.cellNumber
          - Sim.realm

      listUsageByDate:
        # Sample request: /sims/2021-12-14/daily?page=1&limit=50
        display: SIMs Usage by Date
        method: GET
        path: /sims/{date}/daily
        desc: List SIMs Daily Usage by Date
        params:
          - name: date
            type: dateTime
          - $link: cmn.additionalFields
            options:
              - cmn.page
              - cmn.limit


models:
  cmn: # Common fields
    - name: page
      type: number
    - name: limit
      type: number
    - name: additionalFields
      type: collection
      placeholder: Add Field

  Group:
    - name: id
      displayName: Group ID
      type: number
    - name: customField
      type: number
    - name: name
    - name: limit
      type: number
    - name: email

  Sim:
    - name: cellNumber
      type: number
    - name: realm
    - name: name
    - name: serial
    - name: userID
      type: number
